<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Jonathan</title>
	<link rel="stylesheet" href="./src/style/screen.template.css">
	<link rel="stylesheet" href="../src/fontawesome/css/all.css">

	<script src="https://code.jquery.com/jquery-3.7.1.min.js"
		integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
	<script src="./script.js"></script>
	<script type="text/javascript" src="https://livejs.com/live.js"></script>
	<link rel="icon" type="image/png" size="16x16" href="../src/img/favicon.svg">
</head>

<body class="saRootBody saLargeScreen saPc saCompact">
	<div class="saRootContentWrapper">
		<div class="saSideBarOuter">
			<form name="aspnetForm" method="post" action="./softadmin.aspx" id="aspnetForm">
				<aside class="saAside">
					<nav id="SideBar" class="saSideBar saSideBarJs saExpanded" aria-label="Sidomeny">
						<div class="saAccessibilityBannerHolderJs">
							<ul class="saAccessibilityBanner">
								<li><a tabindex="0">Gå till innehåll</a></li>
								<li><a tabindex="0">Gå till meny</a></li>
							</ul>
						</div>
						<div class="saPageHeader saSmallScreenHeader">
							<div class="saHeader">
								<div class="saTopRow">
									<div class="saHeaderWrapper">
										<div class="saTitle">
											<h1>KOLL</h1>
										</div>
									</div>
									<button class="saNotificationWrapper" type="button" aria-live="polite"
										aria-expanded="false" aria-label="83 Notifieringar">
										<i class="far fa-bell saIcon"></i>
										<div class="saBadgeCount saUrgent">83</div>
									</button>
									<button class="saNavigator" type="button" aria-label="Stäng meny"
										data-tooltip="Stäng meny">
										<div class="saNavBar">
											<span class="saNavBarStripe"></span>
											<span class="saNavBarStripe"></span>
											<span class="saNavBarStripe"></span>
										</div>
									</button>
								</div>
							</div>
						</div>
						<section class="saSideBarSection saSideBarHeader saSideBarSectionJs">
							<img class="saCustomerLogo" alt="KOLL logotyp"
								src="../Content.ashx?h=1wvgjNzlYUjYTnoIZyOXkI2qOf8">
							<ul class="saSideBarInputGroup">
								<li>
									<a class="saSideBarSearchLink" tabindex="0">
										<div><i class="far fa-magnifying-glass saIcon" aria-hidden="true"></i></div>
									</a>
									<label class="saSideBarSearch">
										<input id="SideBarSearchInput" class="saSearchInput saInputText" type="search" placeholder="Search...">
										<i class="far fa-magnifying-glass saIcon" aria-hidden="true"></i>
									</label>
								</li>
								<li class="saMenuDropdowns">
									<div class="saMenuDropdown saInputTextWrapper">
										<span class="saFirstLetter">U</span>
										<select class="saInputText saDropdown">
											<option value="8687" selected="">UP 8888 (Softadmin)</option>
										</select>
										<i class="saIcon far fa-angle-down saTrailing"></i>
									</div>
								</li>
							</ul>
						</section>
						<section class="saSideBarSection saSideBarBody saSideBarSectionJs">
							<div class="saSideBarGroup saSideBarFavorites">
								<div class="saSideBarFavoritesHeader">
									<button class="saButtonFavorites" type="button"
										aria-expanded="true"><span>Favoriter</span>
										<i class="saIcon saIcon far fa-angle-down" aria-hidden="true"></i>
									</button>
									<button class="saButtonFavoritesMinimized" type="button" aria-expanded="true"
										data-tooltip="Dölj favoriter">
										<i class="saIcon saIcon far fa-angle-down" aria-hidden="true"></i>
									</button>
									<button class="saButtonFavoritesEdit">Redigera</button>
								</div>
								<ul class="saItemList">
									<li><a class="saItem saFavorite saDynamicTooltipJs" tabindex="0">
											<div class="saItemInner">
												<div class="saIconWrapper"><i class="far fa-cat icon saIcon"></i></div>
												<span>Kattsport</span>
											</div>
										</a></li>
									<li><a class="saItem saFavorite saDynamicTooltipJs" tabindex="0"
											data-sa-minimized-tooltip="Leveranser">
											<div class="saItemInner">
												<div class="saIconWrapper"><i class="far fa-crow icon saIcon"></i>
												</div><span>Kråkor</span>
											</div>
										</a></li>
								</ul>
							</div>
							<div class="saSideBarGroup">
								<h3>Meny</h3>
								<ul class="saItemList">
									<li><a class="saItem saDynamicTooltipJs" tabindex="0"
											data-sa-minimized-tooltip="Startsida">
											<div class="saItemInner">
												<div class="saIconWrapper"><i
														class="far fa-house-window icon saIcon"></i></div>
												<span>Startsida</span>
											</div>
										</a></li>
									<li><a class="saItem saDynamicTooltipJs" tabindex="0"
											data-sa-minimized-tooltip="Min Sida">
											<div class="saItemInner">
												<div class="saIconWrapper"><i
														class="far fa-circle-user icon saIcon"></i></div><span>Min
													Sida</span>
											</div>
										</a></li>
									<li><a class="saItem saDynamicTooltipJs" tabindex="0"
											data-sa-minimized-tooltip="Infobanken">
											<div class="saItemInner">
												<div class="saIconWrapper"><i class="fab fa-leanpub icon saIcon"></i>
												</div><span>Infobanken</span>
											</div>
										</a></li>
								</ul>
							</div>
						</section>
						<section class="saSideBarSection saSideBarFooter saSideBarSectionJs">
							<div class="saSideBarFooterPrimary">
								<div class="saListItem"><button class="saAccountDropdown" type="button"
										aria-expanded="false"><img
											src="/UserPhoto.ashx?id=140d3c0e-1376-4f95-9ced-174c03915ac7"
											aria-hidden="true" class="saAccountAvatar"><span
											class="saAccountName">Jonathan Kevin</span><i
											class="far fa-angle-down saIcon"></i></button></div>
								<ul class="saSideBarToolbar">
									<li><button data-tooltip="Starta ytterligare en session">
											<div class="saIconWrapper"><i class="far fa-window-restore icon saIcon"></i>
											</div><span>Ny flik</span>
										</button></li>
									<li><button data-tooltip="Visa hjälpsida - Redigera hjälpsida">
											<div class="saIconWrapper"><i
													class="far fa-circle-question icon saIcon"></i></div><span>Visa
												hjälpsida - Redigera hjälpsida</span>
										</button></li>
									<li class="saNotificationsItem" aria-expanded="false"><button
											id="largeScreenNotifications" type="button" aria-label="83 Notifieringar"
											aria-live="polite" data-tooltip="Notifieringar" aria-expanded="true"
											aria-describedby="TooltipScreenReader79">
											<div class="saSidenavItem"><i class="far fa-bell saIcon"></i></div>
											<div class="saBadgeCount saUrgent">83</div>
										</button></li>
								</ul>
							</div>
							<div class="saSideBarFooterSecondary"><a class="saSoftadminLogo" target="_blank"
									rel="noopener noreferrer" tabindex="-1" aria-hidden="true"
									href="https://www.multisoft.se/softadmin/"><img class="saLogo"
										src="./Presentation/img/softadmin-logo-minimized.svg"><img class="saWordmark"
										src="./Presentation/img/softadmin-logo-expanded.svg"></a><button
									class="saExpander saDynamicTooltipJs" type="button" aria-label="Minimera menyn"
									aria-expanded="true" data-sa-minimized-tooltip="Expandera menyn"
									data-sa-expanded-tooltip="Minimera menyn" data-tooltip="Minimera menyn"
									aria-describedby="TooltipScreenReader84"><i
										class="far fa-angles-left saIcon"></i></button></div>
						</section>
					</nav>
				</aside>
			</form>
		</div>
		<div class="saRightFrameRoot">
			<div class="right standardview saPc saLargeScreen saCompact">
				<div class="pagecontentframe">
					<form class="interface">
						<header id="pageheader" class="saPageHeaderHolder">
							<div class="saPageHeader saDesktopHeader">
								<div class="saHeader">
									<div class="saRowWrapper">
										<div class="saTopRow">
											<nav class="saBreadcrumbs">
												<div class="saBackButtonWrapper">
													<button class="saBackButton" type="button" disabled="">
														<i class="fa-arrow-left far saBack saIcon"></i>
													</button>
												</div>
											</nav>
										</div>
										<div class="saBottomRow">
											<div class="saTitle">
												<h1 class="saHeaderText">Test</h1>
												<button class="saFavoriteToggle" type="button" tabindex="-1"
													aria-checked="false" aria-label="Save as favorite">
													<i aria-hidden="true" class="saIcon far fa-star"></i>
													<i aria-hidden="true" class="saIcon fas fa-star"></i>
												</button>
												<ul class="saSpecialLinksWrapper"></ul>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="saPageHeader saSmallScreenHeader">
								<div class="saHeader">
									<div class="saHeaderInner">
										<div class="saTopRow">
											<div class="saHeaderWrapper">
												<div class="saTitle">
													<h1 class="saHeaderText">Test</h1>
												</div>
											</div><button class="saNavigator" type="button">
												<div class="saNavBar"><span class="saNavBarStripe"></span><span
														class="saNavBarStripe"></span><span
														class="saNavBarStripe"></span>
												</div>
											</button><button class="saNotificationWrapper" type="button"
												aria-live="polite">
												<div><i class="far fa-bell saIcon"></i></div>
												<div class="saNotificationBadge saEmpty" aria-hidden="true"></div>
											</button>
										</div>
									</div>
									<nav class="saBottomRow saActionLinkBar" style="display: none;"></nav>
								</div>
							</div>
						</header>
						<div class="maincolinner gradients">
							<main id="MI_M" class="menuitem pagecontentframe">
								<div id="MI_ScrollIndicator" class="scrollindicator"></div>
								<div id="MI_ScrollContent" class="scrollcontent saScrollable">
									<div class="scrollcontent-inner">
										<div class="saInputTreeWrapper">
											<button class="saInputTree saOpen" aria-expanded="true" aria-controls="saCheckboxTreeWrapper" type="button">
												<ul>
													<li id="1s" value="1"><span>Baikal</span></li>
													<li id="2s" value="2"><span>Caspian Sea</span></li>
												</ul>
												<i class="saIcon far fa-angle-down"></i>
											</button>
											<div class="saTreeWrapper saCheckboxTreeWrapper saIsDropdown saOpen" id="saCheckboxTreeWrapper" role="tree" aria-multiselectable="true" aria-required="false">
												<div class="saCheckboxTreeHeader">
													<label class="saCheckboxWrapper">
														<input class="saCheckbox" type="checkbox" tabindex="-1">
														<span>Select all</span>
													</label>
													<div class="saCheckboxTreeNumberOfChecked">0 selected</div>
												</div>
												<div class="saCheckboxTreeSticky">
													<div class="saInputTextWrapper">
														<i class="saLeadingIcon far fa-search"></i>
														<input class="saInputText saCheckboxTreeFilter" type="text" role="search" placeholder="Search..." tabindex="-1">
													</div>
												</div>
												<div class="saCheckboxTree">
													<div class="saEmptyState" role="alert" style="display: none;">
														<div class="saEmptyStateIcon">
															<i class="saIcon far fa-search"></i>
														</div>
														<div class="saEmptyStateBody">
															<div class="saEmptyStateHeading">No results found</div>
															<div class="saEmptyStateDescription">Try adjusting your search or filter</div>
														</div>
													</div>
													<fieldset aria-label="Checkbox tree">
														<div class="saCheckboxOuter" aria-current="true">
															<label class="saCheckboxWrapper saFocus">
																<input class="saCheckbox" type="checkbox" aria-level="1" role="treeviewitem" id="1" value="1" checked><span>Baikal</span>
															</label>
														</div>
														<div class="saCheckboxOuter" aria-current="false">
															<label class="saCheckboxWrapper">
																<input class="saCheckbox" type="checkbox" aria-level="1" role="treeviewitem" id="2" value="2" checked><span>Caspian Sea</span>
															</label>
														</div>
														<div class="saCheckboxOuter" aria-current="false">
															<label class="saCheckboxWrapper">
																<input class="saCheckbox" type="checkbox" aria-level="1" role="treeviewitem" id="3" value="3"><span>Great Bear</span>
															</label>
														</div>
														<div class="saCheckboxOuter" aria-current="false">
															<label class="saCheckboxWrapper">
																<input class="saCheckbox" type="checkbox" aria-level="1" role="treeviewitem" id="4" value="4"><span>Great Slave</span>
															</label>
														</div>
														<div class="saCheckboxOuter" aria-current="false">
															<label class="saCheckboxWrapper">
																<input class="saCheckbox" type="checkbox" aria-level="1" role="treeviewitem" id="5" value="5"><span>Lake Michigan</span>
															</label>
														</div>
														<div class="saCheckboxOuter" aria-current="false">
															<label class="saCheckboxWrapper">
																<input class="saCheckbox" type="checkbox" aria-level="1" role="treeviewitem" id="6" value="6"><span>Lake Superior</span>
															</label>
														</div>
														<div class="saCheckboxOuter" aria-current="false">
															<label class="saCheckboxWrapper">
																<input class="saCheckbox" type="checkbox" aria-level="1" role="treeviewitem" id="7" value="7"><span>Lake Tanganyika</span>
															</label>
														</div>
														<div class="saCheckboxOuter" aria-current="false">
															<label class="saCheckboxWrapper">
																<input class="saCheckbox" type="checkbox" aria-level="1" role="treeviewitem" id="8" value="8"><span>Lake Victoria</span>
															</label>
														</div>
														<div class="saCheckboxOuter" aria-current="false">
															<label class="saCheckboxWrapper">
																<input class="saCheckbox" type="checkbox" aria-level="1" role="treeviewitem" id="9" value="9"><span>Malawi</span>
															</label>
														</div>
														<div class="saCheckboxOuter" aria-current="false">
															<label class="saCheckboxWrapper">
																<input class="saCheckbox" type="checkbox" aria-level="1" role="treeviewitem" id="10" value="10"><span>Vänern</span>
															</label>
														</div>
														<div class="saCheckboxOuter" aria-current="false">
															<label class="saCheckboxWrapper">
																<input class="saCheckbox" type="checkbox" aria-level="1" role="treeviewitem" id="11" value="11"><span>Titicaca</span>
															</label>
														</div>
														<div class="saCheckboxOuter" aria-current="false">
															<label class="saCheckboxWrapper">
																<input class="saCheckbox" type="checkbox" aria-level="1" role="treeviewitem" id="12" value="12"><span>Issyk-Kul (Endorheic saline lake in the western Tian Shan mountains in eastern Kyrgyzstan)</span>
															</label>
														</div>
														<div class="saCheckboxOuter" aria-current="false">
															<label class="saCheckboxWrapper">
																<input class="saCheckbox" type="checkbox" aria-level="1" role="treeviewitem" id="13" value="13"><span>Great Salt Lake</span>
															</label>
														</div>
														<div class="saCheckboxOuter" aria-current="false">
															<label class="saCheckboxWrapper">
																<input class="saCheckbox" type="checkbox" aria-level="1" role="treeviewitem" id="14" value="14"><span>Lake Huron</span>
															</label>
														</div>
														<div class="saCheckboxOuter" aria-current="false">
															<label class="saCheckboxWrapper">
																<input class="saCheckbox" type="checkbox" aria-level="1" role="treeviewitem" id="15" value="15"><span>Lake Ontario</span>
															</label>
														</div>
														<div class="saCheckboxOuter" aria-current="false">
															<label class="saCheckboxWrapper">
																<input class="saCheckbox" type="checkbox" aria-level="1" role="treeviewitem" id="16" value="16"><span>Lake St. Clair</span>
															</label>
														</div>
														<div class="saCheckboxOuter" aria-current="false">
															<label class="saCheckboxWrapper">
																<input class="saCheckbox" type="checkbox" aria-level="1" role="treeviewitem" id="17" value="17"><span>Lake Erie</span>
															</label>
														</div>
													</fieldset>
												</div>
											</div>
										</div>
									</div>
								</div>
							</main>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
	<script>
		$(document).ready(function () {
    // Helper to update fictitious focus and scroll
    function updateFocus($item, $tree) {
        $tree.find('[aria-current="true"]').attr('aria-current', 'false')
            .find('.saCheckboxWrapper').removeClass('saFocus');
        $item.attr('aria-current', 'true')
            .find('.saCheckboxWrapper').addClass('saFocus');
        if ($item.length) {
            $item[0].scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
    }

    // Set initial fictitious focus on open (first visible)
    function setInitialFocus($wrapper) {
        var $tree = $wrapper.find('.saCheckboxTree');
        var $visible = $tree.find('.saCheckboxOuter:visible');
        if ($visible.length === 0) return;

        var $current = $tree.find('[aria-current="true"]');
        if ($current.length === 0 || !$current.is(':visible')) {
            $current = $visible.first();
        }
        updateFocus($current, $tree);
    }

    // Toggle dropdown
    $('.saInputTree').on('click', function () {
        var $button = $(this);
        var $wrapper = $button.next('.saTreeWrapper');
        var opening = !$button.hasClass('saOpen');

        $button.toggleClass('saOpen')
            .attr('aria-expanded', opening);
        $wrapper.toggleClass('saOpen');

        if (opening) {
            var $filter = $wrapper.find('.saCheckboxTreeFilter');
            var $tree = $wrapper.find('.saCheckboxTree');

            // Ensure list is focusable
            $tree.attr('tabindex', '-1');

            $filter.focus();
            setInitialFocus($wrapper);

            // Bind Esc to close (namespaced so we can unbind)
            $(document).on('keydown.saTreeClose', function (e) {
                if (e.key === 'Escape') {
                    $button.click();
                    return false;
                }
            });
        } else {
            // Clean up
            $(document).off('keydown.saTreeClose');
            $button.focus(); // Return focus to trigger
        }
    });

    $('.saCheckboxTreeWrapper').each(function () {
        var $wrapper = $(this);
        var $tree = $wrapper.find('.saCheckboxTree');
        var $filter = $wrapper.find('.saCheckboxTreeFilter');
        var $checkboxes = $wrapper.find('.saCheckboxTree .saCheckbox');
        var $selectAllCheckbox = $wrapper.find('.saCheckboxTreeHeader .saCheckbox');
        var $selectedValuesWrapper = $('.saInputTree ul'); // Assumes single instance

        function updateSelectAllState() {
            var total = $checkboxes.length;
            var checked = $checkboxes.filter(':checked').length;

            if (checked === 0) {
                $selectAllCheckbox.prop({ indeterminate: false, checked: false });
            } else if (checked === total) {
                $selectAllCheckbox.prop({ indeterminate: false, checked: true });
            } else {
                $selectAllCheckbox.prop('indeterminate', true);
            }

            $wrapper.find('.saCheckboxTreeNumberOfChecked').text(checked + ' selected');
        }

        $checkboxes.on('change', function () {
            updateSelectAllState();
            $selectedValuesWrapper.empty();

            $checkboxes.each(function () {
                if ($(this).is(':checked')) {
                    var value = $(this).val();
                    var label = $(this).next('span').text();
                    $selectedValuesWrapper.append(
                        '<li class="saAnimate" role="option" id="' + value + 's" value="' + value + '"><span>' + label + '</span></li>'
                    );
                }
            });
        });

        $selectAllCheckbox.on('change', function () {
            var isChecked = $(this).is(':checked');
            $checkboxes.prop('checked', isChecked).trigger('change');
        });

        $selectedValuesWrapper.on('click', '.saTag', function () {
            var value = $(this).attr('value');
            $checkboxes.filter('[value="' + value + '"]').prop('checked', false).trigger('change');
            $(this).remove();
        });

        // Filter keyup + reset focus if current item hidden
        $filter.on('keyup', function () {
            var $checkboxItems = $wrapper.find('.saCheckboxOuter');
            var $noResults = $wrapper.find('.saEmptyState');
            var filterText = $(this).val().toLowerCase();
            var hasVisibleResults = false;

            $checkboxItems.each(function () {
                var $item = $(this);
                var itemText = $item.find('span').text().toLowerCase();
                if (itemText.includes(filterText)) {
                    $item.show();
                    hasVisibleResults = true;
                } else {
                    $item.hide();
                }
            });

            $noResults.toggle(!hasVisibleResults);

            // If current focus is hidden after filter, move to first visible
            var $current = $tree.find('[aria-current="true"]');
            if ($current.length && !$current.is(':visible')) {
                var $visible = $tree.find('.saCheckboxOuter:visible');
                if ($visible.length) {
                    updateFocus($visible.first(), $tree);
                } else {
                    $current.attr('aria-current', 'false')
                        .find('.saCheckboxWrapper').removeClass('saFocus');
                }
            }
        });

        // Arrow keys from filter → move to list
        $filter.on('keydown', function (e) {
            if (e.key === 'ArrowDown' || e.key === 'ArrowUp') {
                e.preventDefault();
                var $visible = $tree.find('.saCheckboxOuter:visible');
                if ($visible.length) {
                    var $target = (e.key === 'ArrowDown') ? $visible.first() : $visible.last();
                    updateFocus($target, $tree);
                    $tree.focus();
                }
            }
        });

        // Virtual focus navigation inside the list
        $tree.on('keydown', function (e) {
            var $visible = $tree.find('.saCheckboxOuter:visible');
            if ($visible.length === 0) return;

            var $current = $tree.find('[aria-current="true"]');
            var currentIndex = $visible.index($current);

            if (e.key === 'ArrowDown') {
                e.preventDefault();
                var nextIndex = Math.min(currentIndex + 1, $visible.length - 1);
                updateFocus($visible.eq(nextIndex), $tree);
            } else if (e.key === 'ArrowUp') {
                e.preventDefault();
                var prevIndex = Math.max(currentIndex - 1, 0);
                updateFocus($visible.eq(prevIndex), $tree);
            } else if (e.key === 'Home') {
                e.preventDefault();
                updateFocus($visible.first(), $tree);
            } else if (e.key === 'End') {
                e.preventDefault();
                updateFocus($visible.last(), $tree);
            } else if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                if ($current.length) {
                    var $cb = $current.find('.saCheckbox');
                    $cb.prop('checked', !$cb.prop('checked')).trigger('change');
                    // Optional: move to next after toggle (common pattern)
                    var nextIndex = Math.min(currentIndex + 1, $visible.length - 1);
                    updateFocus($visible.eq(nextIndex), $tree);
                }
            }
        });

        // Ensure focus is initialized when list receives focus
        $tree.on('focus', function () {
            var $visible = $tree.find('.saCheckboxOuter:visible');
            if ($visible.length && !$tree.find('[aria-current="true"]').length) {
                updateFocus($visible.first(), $tree);
            }
        });

        // Initial state
        updateSelectAllState();
    });
});
	</script>
</body>