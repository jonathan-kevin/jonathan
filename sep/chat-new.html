<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Jonathan</title>
	<link rel="stylesheet" href="./src/style/screen.template.css">
	<link rel="stylesheet" href="../src/fontawesome/css/all.css">
	<script src="https://code.jquery.com/jquery-3.7.1.min.js"
		integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
	<script src="./script.js"></script>
	<script type="text/javascript" src="https://livejs.com/live.js"></script>
	<link rel="icon" type="image/png" size="16x16" href="../src/img/favicon.svg">
</head>

<body class="saRootBody saLargeScreen saPc saCompact">
	<div class="saRootContentWrapper">
		<div class="saSideBar saSideBarJs saExpanded">
			<form id="aspnetForm">
				<nav id="SideBar">
					<div class="saPageHeader saSmallScreenHeader">
						<div class="saHeader">
							<div class="saTopRow">
								<button class="saNavigator" type="button">
									<div class="saNavBar saActive"><span class="saNavBarStripe"></span>
										<span class="saNavBarStripe"></span>
										<span class="saNavBarStripe"></span>
									</div>
								</button>
								<div class="saHeaderWrapper">
									<div class="saTitle">
										<h1>Softadmin® Utvecklingssystem</h1>
									</div>
								</div>
								<button class="saNotificationWrapper" type="button">
									<div><i class="far fa-bell saIcon"></i></div>
									<div class="saNotificationBadge saEmpty" aria-hidden="true">
										<div class="saNotificationBadgeCount">0</div>
									</div>
								</button>
							</div>
						</div>
					</div>
					<div class="saSidenav" id="sidenav">
						<div class="saSidenavSection">
							<div class="saCustomerLogo">
								<div>
									<img loading="lazy" src="../src/img/logo.svg" alt="Softadmin® logo"
										style="min-height: 5rem;">
								</div>
							</div>
							<div class="saSidenavContainer">
								<div class="saSidenavItem saMenuDropdownsOuter">
									<div class="saSidenavItemWrapper">
										<label class="saInputTextWrapper saLabeled">
											<span class="saLabeledLabel">User</span>
											<span class="saFirstLetter">J</span>
											<select class="saInputText saDropdown">
												<option value="0" selected="true">Jonathan</option>
												<option value="1">Kevin</option>
											</select>
											<div class="saTrailingIconsWrapper">
												<i class="saIcon far fa-angle-down"></i>
											</div>
										</label>
									</div>
								</div>
								<div class="saToggleGroup" role="tablist" aria-label="Toggle menu/favorites">
									<button class="saDynamicTooltipJs" type="button" id="tabbutton1" role="tab"
										aria-selected="true">
										<i class="saIcon far fa-bars" aria-hidden="true"></i>
										<span class="saToggleText">Menu</span>
									</button>
									<button class="saDynamicTooltipJs" type="button" id="tabbutton2" role="tab">
										<i class="saIcon far fa-star" aria-hidden="true"></i>
										<span class="saToggleText">Favorites</span>
									</button>
								</div>
							</div>
							<div class="saSidenavLists">
								<ul class="saSidenavItemList">
									<li>
										<a class="saSidenavItemWrapper" tabindex="0">
											<div class="saSidenavItem">
												<i class="far fa-crow saIcon"></i>
												<span class="saSidenavItemText">Crow</span>
											</div>
										</a>
									</li>
									<li>
										<a class="saSidenavItemWrapper" tabindex="0">
											<div class="saSidenavItem">
												<i class="far fa-arrow-turn-down-left saIcon"></i>
												<span class="saSidenavItemText">Egg</span>
											</div>
										</a>
									</li>
									<li>
										<a class="saSidenavItemWrapper" tabindex="0">
											<div class="saSidenavItem">
												<i class="far fa-feather saIcon"></i>
												<span class="saSidenavItemText">Flying lessons</span>
											</div>
										</a>
									</li>
									<li>
										<a class="saSidenavItemWrapper" tabindex="0">
											<div class="saSidenavItem">
												<i class="far fa-ticket-alt saIcon"></i>
												<span class="saSidenavItemText">Aviary tickets</span>
											</div>
										</a>
									</li>
								</ul>
							</div>
						</div>
						<div class="saSidenavSection saSidenavSectionLast">
							<div class="saSidenavContainer">
								<div class="saListItem">
									<button class="saSidenavItemWrapper" type="button" aria-expanded="false">
										<div class="saSidenavItem saAvatarWrapperOuter">
											<div class="saAvatarWrapper saUserInitials" aria-hidden="true">JK</div>
											<span class="saSidenavItemText">Jonathan Kevin</span><i
												class="far fa-angle-down saIcon"></i>
										</div>
									</button>
								</div>
								<div class="saSidenavItem saSidenavItemRow">
									<button class="saSidenavItemWrapper" type="button">
										<div class="saSidenavItem">
											<i class="far fa-gear icon saIcon"></i>
											<span class="saSidenavItemText">Admin</span>
										</div>
									</button>
									<button class="saSidenavItemWrapper" type="button">
										<div class="saSidenavItem">
											<i class="far fa-person-limbs-wide icon saIcon"></i>
											<span class="saSidenavItemText">Database designer</span>
										</div>
									</button>
									<button class="saSidenavItemWrapper" type="button">
										<div class="saSidenavItem">
											<i class="far fa-window-restore icon saIcon"></i>
											<span class="saSidenavItemText">Ny flik</span>
										</div>
									</button>
									<button class="saSidenavItemWrapper" type="button">
										<div class="saSidenavItem">
											<i class="far fa-circle-question icon saIcon"></i>
											<span class="saSidenavItemText">Visa hjälpsida - Allmän hjälpsida</span>
										</div>
									</button>
									<button class="saSidenavItemWrapper saNotificationLinkLargeScreen" type="button">
										<div class="saSidenavItem">
											<div><i class="far fa-bell saIcon"></i></div>
											<span class="saSidenavItemText">Notifieringar</span>
										</div>
										<div class="saNotificationBadge saEmpty" aria-hidden="true">
											<div class="saNotificationBadgeCount">0</div>
										</div>
									</button>
								</div>
							</div>
							<div class="saSidenavFooter">
								<a class="saSoftadminLogo" rel="noopener noreferrer" tabindex="-1" href="#">
									<img loading="lazy" class="saLogo" src="../src/img/softadmin-logo-minimized.svg">
									<img loading="lazy" class="saWordmark" src="../src/img/softadmin-logo-expanded.svg">
								</a>
								<button class="saExpander saDynamicTooltipJs" type="button">
									<i class="fa-angles-left far saIcon"></i>
								</button>
							</div>
						</div>
					</div>
				</nav>
			</form>
		</div>
		<div class="saRightFrameRoot">
			<div class="right standardview">
				<div class="pagecontentframe">
					<form class="interface">
						<header id="pageheader" class="saPageHeaderHolder">
							<div class="saPageHeader saDesktopHeader">
								<div class="saHeader">
									<div class="saRowWrapper">
										<div class="saTopRow">
											<nav class="saBreadcrumbs">
												<div class="saBackButtonWrapper">
													<button class="saBackButton" type="button" disabled>
														<i class="fa-arrow-left far saBack saIcon"></i>
													</button>
												</div>
											</nav>
										</div>
										<div class="saBottomRow">
											<div class="saTitle">
												<h1 class="saHeaderText">Test</h1>
												<div class="saMarkFavorite saNoSpinner"><button type="button"><i
															class="fas fa-star saFavoriteIcon saFavoriteAdded icon saIcon"></i></button>
												</div>
												<ul class="saSpecialLinksWrapper"></ul>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="saPageHeader saSmallScreenHeader">
								<div class="saHeader">
									<div class="saHeaderInner">
										<div class="saTopRow">
											<div class="saHeaderWrapper">
												<div class="saTitle">
													<h1 class="saHeaderText">Test</h1>
												</div>
											</div>
											<button class="saNavigator" type="button">
												<div class="saNavBar"><span class="saNavBarStripe"></span><span
														class="saNavBarStripe"></span><span
														class="saNavBarStripe"></span>
												</div>
											</button>
											<button class="saNotificationWrapper" type="button" aria-live="polite">
												<div><i class="far fa-bell saIcon"></i></div>
												<div class="saNotificationBadge saEmpty" aria-hidden="true">
													<div class="saNotificationBadgeCount">0</div>
												</div>
											</button>
										</div>
									</div>
									<nav class="saBottomRow saActionLinkBar" style="display: none;"></nav>
								</div>
							</div>
						</header>
						<div class="maincolinner gradients">
							<main id="MI_M" class="menuitem pagecontentframe">
								<div id="MI_ScrollIndicator" class="scrollindicator"></div>
								<div id="MI_ScrollContent" class="scrollcontent saScrollable">
									<div class="scrollcontent-inner" style="height:calc(100vh - 112px);">
										<div class="saChatWrapper">
											<div class="saChat">
												<ol class="saLog" aria-role="log" aria-relevant="additions" id="chatLog"
													aria-label="The Chat">
													<li role="separator" class="saChatDay">
														<time datetime="2025-10-08">Yesterday</time>
													</li>
													<li class="saPrompt">
														<p>Can you help me?</p>
														<ul class="saChatToolbar" role="toolbar"
															aria-label="Message actions">
															<li>
																<button type="button" title="Dislike message"
																	aria-label="Edit message">
																	<i class="far fa-pen saIcon"></i>
																</button>
															</li>
															<li>
																<button type="button" title="Copy message"
																	aria-label="Copy message">
																	<i class="far fa-copy saIcon"></i>
																</button>
															</li>
														</ul>
													</li>
													<li class="saResponse">
														<p>Sure,</p>
														<p>Let's make sure we're on track to resolve it efficiently.
															Also,
															it's time we discuss the bird bill of sale. I'll be
															available
															for a meeting later today to go over the details. Looking
															forward to hearing from everyone!</p>
														<ul class="saChatToolbar" role="toolbar"
															aria-label="Message actions">
															<li>
																<button type="button" title="Copy message"
																	aria-label="Copy message">
																	<i class="far fa-copy saIcon"></i>
																</button>
															</li>
															<li>
																<button type="button" title="Like message"
																	aria-label="Like message">
																	<i class="far fa-thumbs-up saIcon"></i>
																</button>
															</li>
															<li>
																<button type="button" title="Dislike message"
																	aria-label="Dislike message">
																	<i class="far fa-thumbs-down saIcon"></i>
																</button>
															</li>
														</ul>
													</li>
													<li role="separator" class="saChatDay">
														<time datetime="2025-10-08">Today</time>
													</li>
													<li class="saPrompt">
														<p>Let's make sure we're on track to resolve it efficiently. Also, it's time we discuss the bird bill of sale. I'll be available for a meeting later today to go over the details. Looking forward to hearing from everyone!</p>
														<ul class="saChatToolbar" role="toolbar"
															aria-label="Message actions">
															<li>
																<button type="button" title="Dislike message"
																	aria-label="Edit message">
																	<i class="far fa-pen saIcon"></i>
																</button>
															</li>
															<li>
																<button type="button" title="Copy message"
																	aria-label="Copy message">
																	<i class="far fa-copy saIcon"></i>
																</button>
															</li>
														</ul>
													</li>
													<li class="saResponse">
														<p>Sure,</p>
														<p>Let's make sure we're on track to resolve it efficiently. Also, it's time we discuss the bird bill of sale. I'll be available for a meeting later today to go over the details. Looking forward to hearing from everyone!</p>
														<ul class="saChatToolbar" role="toolbar"
															aria-label="Message actions">
															<li>
																<button type="button" title="Copy message"
																	aria-label="Copy message">
																	<i class="far fa-copy saIcon"></i>
																</button>
															</li>
															<li>
																<button type="button" title="Like message"
																	aria-label="Like message">
																	<i class="far fa-thumbs-up saIcon"></i>
																</button>
															</li>
															<li>
																<button type="button" title="Dislike message"
																	aria-label="Dislike message">
																	<i class="far fa-thumbs-down saIcon"></i>
																</button>
															</li>
														</ul>
													</li>
													<li class="saSparkles" id="sparkles" role="separator">
													<svg xmlns="http://www.w3.org/2000/svg" id="lg"
														class="saSparkle saLg" data-name="Layer 1"
														viewBox="0 0 381.1 381.2">
														<defs>
															<style>
																.mask {
																	isolation: isolate;
																	opacity: .2;
																}
															</style>
														</defs>
														<g id="lg_" data-name="Layer 1">
															<g>
																<path class="mask"
																	d="M92.3,190.7l51.2,23.6c10.4,4.8,18.7,13.1,23.5,23.5l23.6,51.2,23.6-51.2c4.8-10.4,13.1-18.7,23.5-23.5l51.2-23.6-51.2-23.6c-10.4-4.8-18.7-13.1-23.5-23.5l-23.6-51.2-23.6,51.2c-4.8,10.4-13.1,18.7-23.5,23.5l-51.2,23.6Z">
																</path>
																<path
																	d="M166.9,143.6l23.6-51.2,23.6,51.2c4.8,10.4,13.1,18.7,23.5,23.5l51.2,23.6-51.2,23.6c-10.4,4.8-18.7,13.1-23.5,23.5l-23.6,51.2-23.6-51.2c-4.8-10.4-13.1-18.7-23.5-23.5l-51.1-23.6,51.2-23.6c10.4-4.8,18.7-13.1,23.5-23.5h-.1ZM164.1,35.2l-40.8,88.3-88.2,40.7-.6.3-8.1,3.7-17.1,7.9c-5.7,2.6-9.3,8.3-9.3,14.6s3.6,11.9,9.3,14.5l17,7.9,8.1,3.7.6.3,88.3,40.8,40.8,88.2.3.6,3.7,8.1,7.9,17.1c2.6,5.7,8.3,9.3,14.5,9.3s11.9-3.6,14.5-9.3l7.9-17.1,3.7-8.1.3-.6,40.8-88.3,88.3-40.7.6-.3,8.1-3.7,17.1-7.9c5.7-2.6,9.3-8.3,9.3-14.5s-3.6-11.9-9.3-14.5l-17.1-7.9-8.1-3.7-.6-.3-88.3-40.8-40.7-88.3-.3-.6-3.7-8.2-7.9-17.1c-2.6-5.7-8.3-9.3-14.5-9.3s-11.9,3.6-14.5,9.3l-7.9,17.1-3.7,8.1-.3.6-.1.1Z">
																</path>
															</g>
														</g>
													</svg>
													<svg xmlns="http://www.w3.org/2000/svg" id="sm-n"
														class="saSparkle saSm" data-name="Layer 2"
														viewBox="0 0 192 192">
														<g id="sm-n_" data-name="Layer 2">
															<path
																d="M64,64L7.5,85.2c-4.5,1.7-7.5,6-7.5,10.8s3,9.1,7.5,10.8l56.5,21.2,21.2,56.5c1.7,4.5,6,7.5,10.8,7.5s9.1-3,10.8-7.5l21.2-56.5,56.5-21.2c4.5-1.7,7.5-6,7.5-10.8s-3-9.1-7.5-10.8l-56.5-21.2L106.8,7.5c-1.7-4.5-6-7.5-10.8-7.5s-9.1,3-10.8,7.5l-21.2,56.5Z">
															</path>
														</g>
													</svg>
													<svg xmlns="http://www.w3.org/2000/svg" id="sm-s"
														class="saSparkle saSm" data-name="Layer 3"
														viewBox="0 0 192 192">
														<g id="sm-s_" data-name="Layer 3">
															<path
																d="M64,64L7.5,85.2c-4.5,1.7-7.5,6-7.5,10.8s3,9.1,7.5,10.8l56.5,21.2,21.2,56.5c1.7,4.5,6,7.5,10.8,7.5s9.1-3,10.8-7.5l21.2-56.5,56.5-21.2c4.5-1.7,7.5-6,7.5-10.8s-3-9.1-7.5-10.8l-56.5-21.2L106.8,7.5c-1.7-4.5-6-7.5-10.8-7.5s-9.1,3-10.8,7.5l-21.2,56.5Z">
															</path>
														</g>
													</svg>
													</li>
												</ol>
												<a class="saChatLatest saReached" id="latest" href="#"
													aria-label="Scroll to latest messages">
													<i class="far fa-arrow-down"></i>
												</a>
											</div>
											<div class="saComposer" id="composer">
												<textarea name="message" placeholder="Write your message..."
													id="prompt"></textarea>
												<button type="submit" class="saButtonSend" id="send" disabled
													aria-label="Send prompt" title="Send prompt">
													<i class="fa-arrow-up saIcon far"></i>
												</button>
												<button type="button" class="saButtonStop" id="stop"
													aria-label="Stop response" title="Stop prompt"
													style="display: none;">
													<i class="fa-stop saIcon fas"></i>
												</button>
											</div>
										</div>
									</div>
								</div>
							</main>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
</body>
<script>
 $(document).ready(function () {
    // Chat application module
    const ChatApp = (function () {
        // DOM elements
        const $prompt = $('#prompt');
        const $composer = $('#composer');
        const $chatLog = $('#chatLog');
        const $latest = $('#latest');
        const $send = $('#send');
        const $stop = $('#stop');
        const $sparkles = $('#sparkles');

        // State management
        let state = 'idle'; // idle | thinking
        let responseTimeout = null;

        // Create toolbar for messages
        function createToolbar(isPrompt) {
            const $toolbar = $('<ul>')
                .attr({
                    'role': 'toolbar',
                    'aria-label': 'Message actions'
                })
                .addClass('saChatToolbar');

            const buttons = isPrompt
                ? [
                    { label: 'Edit message', icon: 'pen' },
                    { label: 'Copy message', icon: 'copy' }
                ]
                : [
                    { label: 'Copy message', icon: 'copy' },
                    { label: 'Like message', icon: 'thumbs-up' },
                    { label: 'Dislike message', icon: 'thumbs-down' }
                ];

            buttons.forEach(({ label, icon }) => {
                $toolbar.append(
                    $('<li>').append(
                        $('<button>')
                            .attr({
                                'type': 'button',
                                'aria-label': label
                            })
                            .append($('<i>').addClass(`far fa-${icon} saIcon`))
                    )
                );
            });

            return $toolbar;
        }

        // Update send button state
        function updateSendButton() {
            $send.prop('disabled', !$prompt.val().trim());
        }

        // Manage sparkles animation
        function setSparkles(show) {
            $sparkles
                .toggle(show)
                .attr('aria-busy', show ? 'true' : null);
        }

        // Update chat state
        function setState(newState) {
            state = newState;
            const isThinking = state === 'thinking';

            $send.toggle(!isThinking);
            $stop.toggle(isThinking);
            setSparkles(isThinking);

            if (!isThinking) {
                updateSendButton();
            }
        }

        // Send and handle message
        function sendMessage() {
            const message = $prompt.val().trim();
            if (!message || state !== 'idle') return;

            // Add user prompt to chat log
            const lines = message.split(/\r?\n/);
            const $promptLi = $('<li>')
                .addClass('saPrompt')
                .append(
                    $('<p>').html(lines.map(line => $('<div>').text(line).html()).join('<br>')),
                    createToolbar(true)
                );
            $chatLog.append($promptLi);

            // Reset input
            $prompt.val('');
            updateSendButton();
            $prompt.focus();
            scrollToBottom();

            // Set thinking state
            setState('thinking');

            // Simulate response with word-by-word reveal
            const responseLines = [
                "Absolutely, I can help you with that.",
                "Here are the steps you should follow:",
                "1. Review the requirements.",
                "2. Implement the necessary changes.",
                "3. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."
            ];

            const $responseLi = $('<li>').addClass('saResponse');
            $chatLog.append($responseLi);

            // Split response into words and track paragraph boundaries
            const words = responseLines.join(' ').split(/\s+/);
            const lineWordCounts = responseLines.map(line => line.split(/\s+/).length);
            let wordIndex = 0;
            let currentLineIndex = 0;
            let wordsInCurrentLine = 0;
            let currentP = $('<p>').appendTo($responseLi);

            function revealWord() {
                if (wordIndex < words.length) {
                    if (wordIndex > 0 && wordsInCurrentLine === 0) {
                        currentP = $('<p>').appendTo($responseLi); // Start new paragraph
                    } else if (wordIndex > 0) {
                        currentP.append(' ');
                    }
                    currentP.append($('<span>').text(words[wordIndex]).addClass('saWord'));
                    scrollToBottom();
                    wordIndex++;
                    wordsInCurrentLine++;

                    // Check if current paragraph is complete
                    if (wordsInCurrentLine >= lineWordCounts[currentLineIndex]) {
                        // Replace spans with paragraph text
                        currentP.html($('<div>').text(responseLines[currentLineIndex]).html());
                        currentLineIndex++;
                        wordsInCurrentLine = 0;
                    }

                    responseTimeout = setTimeout(revealWord, 10); // Adjust delay (10ms per word)
                } else {
                    $responseLi.append(createToolbar(false));
                    scrollToBottom();
                    setState('idle');
                }
            }

            // Start revealing words after a short delay
            setTimeout(revealWord, 1000);

            // Handle stop button
            $stop.off('click').on('click', function () {
                clearTimeout(responseTimeout);
                // Replace all content with final paragraphs
                const finalHtml = responseLines.map(line => $('<p>').text(line).prop('outerHTML')).join('');
                $responseLi.html(finalHtml);
                $responseLi.append(createToolbar(false));
                setState('idle');
            });
        }

        // Scroll chat log to bottom
        function scrollToBottom() {
            $chatLog[0].scrollTop = $chatLog[0].scrollHeight;
        }

        // Handle scroll events
        function handleScroll() {
            const isAtBottom = Math.abs(
                $chatLog[0].scrollHeight - $chatLog[0].scrollTop - $chatLog[0].clientHeight
            ) < 16;
            $latest.toggleClass('saReached', isAtBottom);
        }

        // Initialize event listeners
        function initEvents() {
            $prompt.on('input', function () {
                if (state === 'idle') updateSendButton();
            });

            $send.on('click', function (e) {
                e.preventDefault();
                sendMessage();
            });

            $prompt.on('keydown', function (e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });

            $stop.on('click', function () {
                clearTimeout(responseTimeout);
                setState('idle');
            });

            $chatLog.on('scroll', handleScroll);
        }

        // Initialize the chat application
        function init() {
            initEvents();
            updateSendButton();
        }

        return { init };
    })();

    // Start the application
    ChatApp.init();
});
</script>

</html>